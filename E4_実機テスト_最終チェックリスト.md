# E4 実機テスト 最終チェックリスト

## 🎯 テスト目的
LINE導線の可用性100%を担保し、本番環境での動作を実機で確認する。

---

## ⏰ 所要時間
- **準備**: 5分
- **iOS実機テスト**: 15分
- **Android実機テスト**: 15分
- **証跡整理**: 5分
- **合計**: 約40分

---

## 📋 事前準備チェックリスト

### 必須項目
```
[ ] iOS端末（iPhone、iOS 15.0以上）
[ ] Android端末（Pixel/Galaxy等、Android 10以上）
[ ] 両端末にLINEアプリインストール済み
[ ] 安定したWi-Fi接続
[ ] テストURL確認済み
[ ] スクリーンショット撮影方法確認
```

### 設定確認
```
[ ] main.js の LINE URL が本番URLに設定済み
[ ] UTMパラメータが最終版に更新済み
[ ] config.production.js が作成済み
[ ] test-evidence/ ディレクトリ作成済み
```

### テスト環境URL
- **ローカル**: `http://localhost:5500/index.html`
- **ステージング**: `https://azvelia-staging.vercel.app`
- **本番**: `https://azvelia.vercel.app`

---

## 📱 iOS実機テスト（15分）

### デバイス情報記録
```
機種: iPhone ___________
OS: iOS ___________
ブラウザ: Safari ___________
LINEアプリ: バージョン ___________
テスト開始時刻: __:__
```

### テストシナリオ

#### 1. 初期表示確認（1分）
```
[ ] Safariでテストページを開く
[ ] ページが正しく読み込まれる
[ ] ヒーローセクションが表示される
[ ] 「LINEで注文する」ボタンが表示される
[ ] 「QRコードを表示」ボタンが表示される

📸 スクリーンショット: 01_hero_cta.png
```

#### 2. ヒーローCTA → LINE遷移（2分）
```
[ ] 「LINEで注文する」ボタンをタップ
[ ] LINEアプリが自動起動
[ ] AZVELIA公式アカウント画面に遷移
[ ] 遷移がスムーズ（3秒以内）
[ ] エラーが発生しない

📸 スクリーンショット: 04_line_success.png
```

#### 3. QRコード表示（2分）
```
[ ] ブラウザに戻る
[ ] 「QRコードを表示」ボタンをタップ
[ ] モーダルがアニメーション表示
[ ] QRコード画像が読み込まれる
[ ] 背景スクロールが無効化される
[ ] 「LINEで開く」ボタンが表示される

📸 スクリーンショット: 02_qr_modal.png
```

#### 4. QRコード読み取り（2分）
```
[ ] 別のスマホでQRコードをスキャン
[ ] QRコードが正しく読み取れる
[ ] LINEアプリが起動
[ ] AZVELIA公式アカウント画面に遷移

（QRコード読み取り成功を確認）
```

#### 5. QRモーダル内CTA（2分）
```
[ ] テスト端末に戻る
[ ] QRモーダル内の「LINEで開く」ボタンをタップ
[ ] LINEアプリが起動
[ ] 公式アカウント画面に遷移
[ ] エラーが発生しない
```

#### 6. モーダルを閉じる（1分）
```
[ ] ブラウザに戻る
[ ] QRモーダルを再度表示
[ ] ×ボタンをタップ → モーダルが閉じる
[ ] スクロールが有効化される
[ ] 再度モーダルを表示
[ ] 背景（黒い部分）をタップ → モーダルが閉じる
```

#### 7. 追従CTA表示（2分）
```
[ ] ページを500px以上スクロール
[ ] 画面下部に追従CTAがスライドイン表示
[ ] 固定配置で追従する
[ ] CTA表示がスムーズ

📸 スクリーンショット: 03_sticky_cta.png
```

#### 8. 追従CTA → LINE遷移（2分）
```
[ ] 追従CTAをタップ
[ ] LINEアプリが起動
[ ] 公式アカウント画面に遷移
[ ] エラーが発生しない
```

#### 9. トラッキングログ確認（1分）
```
[ ] ブラウザに戻る
[ ] Safari開発者ツールを開く
[ ] コンソールで showTrackingLogs() を実行
[ ] ログが表示される
[ ] 以下のイベントが記録されている:
    [ ] page_view
    [ ] line_cta_click (location: hero)
    [ ] qr_modal_open
    [ ] line_cta_click (location: qr-modal)
    [ ] qr_modal_close
    [ ] sticky_cta_show
    [ ] line_cta_click (location: sticky)

📸 スクリーンショット: 05_tracking_logs.png
```

### 計測パラメータ検証
```javascript
// コンソールで実行
testLineUrl('hero')

// 期待される出力
https://line.me/R/ti/p/@azvelia
  ?utm_source=azvelia_lp
  &utm_medium=web
  &utm_campaign=2025_q4_karaage_order
  &utm_content=hero
  &timestamp=1697270400000
  &ref=hero

[ ] utm_source が正しい
[ ] utm_medium が正しい
[ ] utm_campaign が正しい
[ ] utm_content が正しい
[ ] timestamp が記録されている
```

### iOS テスト完了
```
テスト終了時刻: __:__
総合評価: [ ] 合格 [ ] 不合格
不具合件数: ____ 件
```

---

## 📱 Android実機テスト（15分）

### デバイス情報記録
```
機種: ___________
OS: Android ___________
ブラウザ: Chrome ___________
LINEアプリ: バージョン ___________
テスト開始時刻: __:__
```

### テストシナリオ

#### 1. 初期表示確認（1分）
```
[ ] Chromeでテストページを開く
[ ] ページが正しく読み込まれる
[ ] ヒーローセクションが表示される
[ ] 「LINEで注文する」ボタンが表示される
[ ] 「QRコードを表示」ボタンが表示される

📸 スクリーンショット: 01_hero_cta.png
```

#### 2. ヒーローCTA → LINE遷移（2分）
```
[ ] 「LINEで注文する」ボタンをタップ
[ ] LINEアプリが自動起動
[ ] AZVELIA公式アカウント画面に遷移
[ ] 遷移がスムーズ（3秒以内）
[ ] エラーが発生しない

📸 スクリーンショット: 04_line_success.png
```

#### 3. QRコード表示（2分）
```
[ ] ブラウザに戻る
[ ] 「QRコードを表示」ボタンをタップ
[ ] モーダルがアニメーション表示
[ ] QRコード画像が読み込まれる
[ ] 背景スクロールが無効化される
[ ] 「LINEで開く」ボタンが表示される

📸 スクリーンショット: 02_qr_modal.png
```

#### 4. QRコード読み取り（2分）
```
[ ] 別のスマホでQRコードをスキャン
[ ] QRコードが正しく読み取れる
[ ] LINEアプリが起動
[ ] AZVELIA公式アカウント画面に遷移

（QRコード読み取り成功を確認）
```

#### 5. QRモーダル内CTA（2分）
```
[ ] テスト端末に戻る
[ ] QRモーダル内の「LINEで開く」ボタンをタップ
[ ] LINEアプリが起動
[ ] 公式アカウント画面に遷移
[ ] エラーが発生しない
```

#### 6. モーダルを閉じる（1分）
```
[ ] ブラウザに戻る
[ ] QRモーダルを再度表示
[ ] ×ボタンをタップ → モーダルが閉じる
[ ] スクロールが有効化される
[ ] 再度モーダルを表示
[ ] 背景（黒い部分）をタップ → モーダルが閉じる
```

#### 7. 追従CTA表示（2分）
```
[ ] ページを500px以上スクロール
[ ] 画面下部に追従CTAがスライドイン表示
[ ] 固定配置で追従する
[ ] CTA表示がスムーズ

📸 スクリーンショット: 03_sticky_cta.png
```

#### 8. 追従CTA → LINE遷移（2分）
```
[ ] 追従CTAをタップ
[ ] LINEアプリが起動
[ ] 公式アカウント画面に遷移
[ ] エラーが発生しない
```

#### 9. トラッキングログ確認（1分）
```
[ ] ブラウザに戻る
[ ] Chrome開発者ツールを開く
[ ] コンソールで showTrackingLogs() を実行
[ ] ログが表示される
[ ] 以下のイベントが記録されている:
    [ ] page_view
    [ ] line_cta_click (location: hero)
    [ ] qr_modal_open
    [ ] line_cta_click (location: qr-modal)
    [ ] qr_modal_close
    [ ] sticky_cta_show
    [ ] line_cta_click (location: sticky)

📸 スクリーンショット: 05_tracking_logs.png
```

### 計測パラメータ検証
```javascript
// コンソールで実行
testLineUrl('hero')

// 期待される出力
https://line.me/R/ti/p/@azvelia
  ?utm_source=azvelia_lp
  &utm_medium=web
  &utm_campaign=2025_q4_karaage_order
  &utm_content=hero
  &timestamp=1697270400000
  &ref=hero

[ ] utm_source が正しい
[ ] utm_medium が正しい
[ ] utm_campaign が正しい
[ ] utm_content が正しい
[ ] timestamp が記録されている
```

### Android テスト完了
```
テスト終了時刻: __:__
総合評価: [ ] 合格 [ ] 不合格
不具合件数: ____ 件
```

---

## 📸 証跡保存（5分）

### スクリーンショット保存
```
iOS:
[ ] test-evidence/ios/screenshots/01_hero_cta.png
[ ] test-evidence/ios/screenshots/02_qr_modal.png
[ ] test-evidence/ios/screenshots/03_sticky_cta.png
[ ] test-evidence/ios/screenshots/04_line_success.png
[ ] test-evidence/ios/screenshots/05_tracking_logs.png

Android:
[ ] test-evidence/android/screenshots/01_hero_cta.png
[ ] test-evidence/android/screenshots/02_qr_modal.png
[ ] test-evidence/android/screenshots/03_sticky_cta.png
[ ] test-evidence/android/screenshots/04_line_success.png
[ ] test-evidence/android/screenshots/05_tracking_logs.png
```

### ログファイル保存
```javascript
// iOS/Android 各端末のコンソールで実行
const logs = JSON.parse(localStorage.getItem('azvelia_tracking_logs') || '[]');
console.log(JSON.stringify(logs, null, 2));

// 出力をコピーして保存:
// iOS: test-evidence/ios/logs/tracking_logs.json
// Android: test-evidence/android/logs/tracking_logs.json
```

```
iOS:
[ ] test-evidence/ios/logs/tracking_logs.json

Android:
[ ] test-evidence/android/logs/tracking_logs.json
```

### テスト結果レポート作成
```
[ ] test-evidence/test-report-template.md をコピー
[ ] test-evidence/test-report.md にリネーム
[ ] テスト結果を記入
[ ] 不具合があれば詳細を記載
[ ] DoD達成状況を記入
```

---

## 🎯 DoD最終確認

```
[ ] 実機2OS（iOS/Android）で遷移100%成功
[ ] 計測パラメータが正しく付与・記録される
[ ] エラー時の代替導線が機能する
[ ] 証跡保存完了（スクリーンショット10枚＋ログ2件）
[ ] テスト結果レポート作成完了
```

**総合評価**: [ ] 全項目達成 [ ] 一部未達成

---

## 📊 テスト結果サマリー

### iOS
```
デバイス: iPhone ___________
OS: iOS ___________
成功率: ____ / 11 ケース (___%)
不具合: ____ 件
評価: [ ] 合格 [ ] 不合格
```

### Android
```
デバイス: ___________
OS: Android ___________
成功率: ____ / 11 ケース (___%)
不具合: ____ 件
評価: [ ] 合格 [ ] 不合格
```

---

## 🚀 次のアクション

```
[ ] E1（Architect）にレビュー依頼
    - test-evidence/ ディレクトリを共有
    - test-report.md を提出

[ ] 不具合があればIssue作成
    - GitHub Issues に登録
    - 優先度・担当者を設定

[ ] 本番デプロイ承認申請
    - E1承認後、本番デプロイ実施

[ ] E3にGA4連携確認依頼
    - 計測パラメータの整合性確認
    - DebugViewでイベント発火確認

[ ] ドキュメント更新
    - 必要に応じてREADME更新
```

---

## 💡 トラブルシューティング

### LINEアプリが起動しない
```
原因: LINEアプリ未インストール / LINE URLが間違っている
対処: 
1. LINEアプリのインストール確認
2. main.js の CONFIG.lineUrl を確認
3. ブラウザのポップアップブロック解除
```

### QRコードが表示されない
```
原因: ネットワーク接続エラー / Google Chart API障害
対処:
1. Wi-Fi接続確認
2. コンソールでエラー確認
3. フォールバック画像表示を確認
```

### トラッキングログが記録されない
```
原因: ブラウザのプライベートモード / localStorage無効
対処:
1. 通常モードでテスト
2. ブラウザ設定でlocalStorage有効化確認
```

### 追従CTAが表示されない
```
原因: スクロール量不足（<500px）
対処:
1. 500px以上スクロール
2. コンソールでエラー確認
```

---

## 📞 連絡先

**E4 (Integrations)**: LINE導線・実装担当  
**E1 (Architect)**: プロジェクトリーダー・レビュアー  
**E3 (Data & Tracking)**: GA4計測関連

---

**作成日**: 2025-10-14  
**バージョン**: 1.0（最終版）  
**担当**: E4 (Integrations Engineer)

---

## ✅ チェックリスト完了

```
テスト実施者署名: _______________
実施日: 2025-10-__
完了時刻: __:__

全項目完了: [ ] はい [ ] いいえ
```

**お疲れ様でした！🎉**

